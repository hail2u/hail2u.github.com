<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">

    <title>CSS 2.1 Advent Calendar '11</title>

    <link href="/css/normalize.css" rel="stylesheet">
    <style>
      body {
        counter-reset: day;
        font-family: "Helvetica Neue", "Calibri", sans-serif;
        margin: 0 auto;
        max-width: 45rem;
        padding: 0 1.5rem;
      }

      header,
      footer,
      .buttons {
        line-height: 1;
      }

      header h1 {
        font-family: "Palatino", "Palatino Linotype", serif;
        font-style: italic;
        margin: 6rem 0 0;
      }

      header h1 .version,
      header h1 .year {
        color: crimson;
      }

      header p {
        font-size: 1rem;
        font-weight: normal;
        margin-top: .5rem;
      }

      .day h1 {
        font-size: 1.5rem;
        margin: 6rem 0 1rem;
        position: relative;
      }

      .day h1::before {
        color: crimson;
        content: "Day " counter(day);
        counter-increment: day;
        display: block;
        font-family: "Palatino", "Palatino Linotype", serif;
        font-style: italic;
      }

      a {
        color: dodgerblue;
      }

      footer p {
        font-family: "Palatino", "Palatino Linotype", serif;
        font-style: italic;
        margin: 6rem 0 0;
      }

      .buttons > div {
        float: left;
        margin: 2rem 0;
      }

      @media (min-width: 60rem) {
        .day h1::before {
          position: absolute;
          right: 100%;
          width: 6rem;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>CSS <span class="version">2.1</span> Advent Calendar <span class="year">'11</span></h1>

      <p>基礎以上ベスト・プラクティス未満。</p>
    </header>

    <section class="day" id="d1">
      <h1>CSSハックのことは忘れる</h1>

      <p>CSSハックの多くは便利で強力なものだが、それに頼るのは危険だ。まずは普通にCSSを書くことに注力するべきだろう。その上で条件付きコメントや<a href="http://www.modernizr.com/">Modernizr</a>を使うかCSSハックをあえて使うか決めると良い。</p>
    </section>

    <section class="day" id="d2">
      <h1>色の書き方は統一する</h1>

      <p>キーワードによる色の指定や<code>#rrggbb</code>、<code>rgb()</code>といくつかの方法で色を指定することができるが、<code>#rrggbb</code>の桁を合わせることも含めていずれかに統一した方が可読性とメンテナンス性が上がるだろう。</p>
    </section>

    <section class="day" id="d3">
      <h1><code>%</code>は長さの単位ではない</h1>

      <p><code>border-width</code>などで使用できない理由はそれだ。他にも使用することができないプロパティがいくつかある。また<code>%</code>はコンテキストによって基準になる単位が大きく変わる他継承においてもある意味不可解な挙動を起こすことがある(<code>line-height</code>など)ので、使用には注意を払う必要がある。</p>
    </section>

    <section class="day" id="d4">
      <h1>UTF-8で書く</h1>

      <p>HTTPヘッダーの<code>Content-Type</code>フィールドやCSSファイル内での<code>@charset</code>、<code>link</code>要素の<code>charset</code>属性(HTML5にはない)など様々な方法でCSSの文字コードを示す方法はある。しかし文字コード絡みのブラウザのバグが過去にいくつも報告されており、それを考慮するとUTF-8で(なるべくならASCII文字だけで)書くのが無難だろう。</p>
    </section>

    <section class="day" id="d5">
      <h1>クラス・IDセレクタで要素名までは書かない</h1>

      <p>そのほとんど全ては不必要なはずだ。どうしても必要というのならそれはHTMLの設計がおかしい可能性が高い。</p>
    </section>

    <section class="day" id="d6">
      <h1>擬似クラスと擬似要素</h1>

      <p>対象となる要素に仮想的にクラスを割り振るのが擬似クラスなので、<code>p:first-child</code>は親要素に対してある<code>p</code>要素が最初の子だった場合に対象になる(<code>p</code>要素の最初の子<em>ではない</em>)。対象となる要素の子(CSS3では子とは限らない)に仮想的な要素を作り出すのが擬似要素だ。そのため<code>p:fist-letter</code>は<em>全ての<code>p</code>要素の最初の一文字</em>が対象になる。</p>
    </section>

    <section class="day" id="d7">
      <h1><code>@import</code>は最初に書く</h1>

      <p>何かしらのルールが出てきた時点でそれ以降にある<code>@import</code>は無効になる。下手に書くとブラウザが効率よく並列ダウンロードしてくれないという問題はあるものの<code>@import</code>を使う機会はたまにあるので忘れないようにするべきだ。</p>
    </section>

    <section class="day" id="d8">
      <h1>カスケーディングを意識しすぎない</h1>

      <p>IDセレクタが強いとか後に書いたセレクタの方が強い程度の知識で終わっている人が大半だろう。そして多くの人が考えるよりもカスケーディングの奥は深いので、あまり意識せずに簡明なセレクタを心がけてCSSを書くのが基本にして奥義に通じるのではないかと考える。</p>
    </section>

    <section class="day" id="d9">
      <h1><code>!important</code>は必要ない</h1>

      <p>普通にCSSを書く上で<code>!important</code>が必要になることはまずない。セレクタの書き方と順序により必要になることがあるが、多くの場合はセレクタの書き方の工夫のみで使用を回避できる。うまく使うと威力を発揮するがその分取り扱いが難しいので使用を避けた方が無難だろう。</p>
    </section>

    <section class="day" id="d10">
      <h1>同じプロパティは必ず並べる</h1>

      <p>特定の値(CSS 2.1の話ではないが<code>rgba()</code>による色指定など)に対応していないブラウザへのフォールバックに使用したり、同じプロパティを複数書かざるをえないことはままある。並べて書いてあれば、その値を比べることによってどうして複数必要なのかといった理由が明瞭になるだろう。</p>
    </section>

    <section class="day" id="d11">
      <h1>短縮プロパティは使わない</h1>

      <p>編集時に限って…の話だが、短縮プロパティはそもそも順序を間違えることがありうるし(<code>font</code>で<code>font-weight</code>をどこに書くかとかパッとわかる人は少ない)、<code>margin-right</code>などと書いてあった方が誰が読んでも把握できるだろう。最終的にそれらのプロパティをまとめたり空白を詰めて圧縮してくれたりするツール(<a href="http://www.cleancss.com/">CleanCSS</a>など)に通すことによって最適化されたCSSファイルに変換すれば良い。</p>
    </section>

    <section class="day" id="d12">
      <h1>プロパティを書く順序に一貫性をもたせる</h1>

      <p>可読性とメンテナンス性のために一貫性を持たせることの重要性は高い。様々な並べ方があると思うが、プロパティの削除や追加が頻繁に行われているCSS3を考慮してアルファベット順に並べるというのがコンセンサスを得やすいだろう。</p>
    </section>

    <section class="day" id="d13">
      <h1><code>border</code>のレンダリングに過度の期待をしない</h1>

      <p><code>border</code>のレンダリングはブラウザによってかなり違う。その違いは微妙なものとも言えるのだが、<code>border</code>プロパティ自体の主張が強いので受けるイメージに大きくずれができる。<code>solid</code>と<code>double</code>は比較的差がないので比較的安全と言えるだろう。</p>
    </section>

    <section class="day" id="d14">
      <h1><code>position: absolute</code>の基準を理解する</h1>

      <p><a href="http://www.w3.org/TR/CSS2/visuren.html#comp-abspos">仕様に書いてある通り</a>、直近のポジション指定されている親が基準になる。つまり親に<code>relative</code>等が<code>position</code>の値として指定された要素があればそれが、なければ通常viewport(表示領域)が基準になる。</p>
    </section>

    <section class="day" id="d15">
      <h1><code>right: 100%</code>と<code>left: -100px</code>を使い分ける</h1>

      <p>どちらもマイナスの位置に要素を配置するテクニックである。内容物が可変な場合は<code>%</code>配置の方が向いていることが多く、メンテナンス性も高い。逆に固定サイズの場合は負の長さを使った方が確実なので、場合によって使い分けるのが良いだろう。</p>
    </section>

    <section class="day" id="d16">
      <h1><code>vertical-align</code>のことは忘れる</h1>

      <p><a href="http://www.w3.org/TR/CSS2/visuren.html#line-box">行ボックス</a>という概念の理解が必要だが、非常に込み入った概念で正確に把握している人は数えるほどしかいない。多くの場合は代替手段があるのであまりこだわらない方が無難だろう。</p>
    </section>

    <section class="day" id="d17">
      <h1><code>:before</code>と<code>:after</code>擬似要素と置換要素</h1>

      <p>ブラウザによって挙動が違うので使用は避けるべきだろう。<a href="http://www.w3.org/TR/CSS2/conform.html#replaced-element">置換要素</a>とは<code>img</code>や<code>textarea</code>要素などがそれにあたり、それらに対しては<code>content</code>プロパティで何かを流し込むことができたりできなかったりするということだ。</p>
    </section>

    <section class="day" id="d18">
      <h1><code>list-style-type</code>のデフォルト値を知る</h1>

      <p>多くのブラウザにおいてデフォルトではいわゆるブレットと呼ばれる黒丸だが、ネストすると下の階層では違うマークが使用される。そのため安易に<code>ul</code>要素等で<code>none</code>などを指定してリセットしてしまうとこのデフォルトの挙動に戻すことができなくなる(難しくなる)。</p>
    </section>

    <section class="day" id="d19">
      <h1><code>background-image</code>と<code>background-color</code>はセットで指定する</h1>

      <p>最近は画像非表示で…などという人はまずいないがそもそもそういうためのものではない。画像は読み込みに失敗することがあるので、それに対してのフォールバックとして背景色の指定は絶対に必要であるだろう。</p>
    </section>

    <section class="day" id="d20">
      <h1><code>background-position</code>と<code>top</code>他の座標指定の仕組みは違う</h1>

      <p>X座標とY座標を指定すると、その位置と背景画像におけるそのX座標とY座標の位置を合わせるようにして配置される。<code>position</code>系の座標指定のように指定した位置と背景画像の左上を合わせるわけではない。この仕様のお陰で背景画像の中央揃えは<code>50% 50%</code>で簡単にできるようになっている。</p>
    </section>

    <section class="day" id="d21">
      <h1>代替フォントは形状よりも文字幅や<code>x-height</code>の近いものを選ぶ</h1>

      <p>プライマリのフォントと同じ見た目ではなく<em>読感</em>を提供することが重要なので、形状よりも文字幅を合わせて一行の文字数に差が出ないようにすることや<code>x-height</code>が近いものを選んで文字の識別しやすさを揃えることを重視した方が良い。</p>
    </section>

    <section class="day" id="d22">
      <h1>総称ファミリを忘れない</h1>

      <p>総称ファミリは文法的には必須ではない。しかし書かなかった場合にフォールバックされるフォントはブラウザの実装に強く依存し、場合によってはユーザーが設定すらしていないよくわからないフォントで表示されてしまうことになる。総称ファミリを指定しておけばユーザーが設定したフォントになるという実装が多いので、そういった意味でユーザーに優しいCSSと言えるだろう。</p>
    </section>

    <section class="day" id="d23">
      <h1><code>font-style: italic</code>は斜体になるとは限らない</h1>

      <p>通常斜体のないフォントにそれを指定した場合、ブラウザ側が無理やり斜めにした形で表示される。しかし、限られたケースではあるが斜体が無いにもかかわらず、ブラウザからは斜体があるように見えるフォント(例えばメイリオ)があることは覚えておきたい。</p>
    </section>

    <section class="day" id="d24">
      <h1><code>text-transform</code>による影響を知る</h1>

      <p>文字の大文字化やキャピタライズを行うプロパティだが、その実装にはブラウザ間で違いがある。<code>capitalize</code>でハイフンに続く大文字になるブラウザとそうでないブラウザがあるし、<code>uppercase</code>にしたテキストをコピーすると大文字になったテキストがクリップボードに入るブラウザとそうでないブラウザがある。</p>
    </section>

    <section class="day" id="d25">
      <h1><code>cursor</code>は理由がなければ使わない</h1>

      <p>ほとんど全てのケースでユーザーを混乱させる原因になる。クリックすると<code>a</code>要素のようにページの遷移が起こる要素に<code>pointer</code>とするなど妥当な理由があればその限りではない。</p>
    </section>

    <footer>
      <p>Written by <a href="https://kyonagashima.com/">Kyo Nagashima</a>, and released into <a href="http://unlicense.org/">Public Domain</a></p>
    </footer>

    <aside class="buttons">
      <div class="fb-like" data-href="http://hail2u.github.com/css21-advent-calendar-2011.html" data-send="false" data-layout="button_count" data-width="110" data-show-faces="false"></div>
      <div class="tw-tweet"><a href="http://twitter.com/share" class="twitter-share-button" data-url="http://hail2u.github.com/css21-advent-calendar-2011.html" data-count="horizontal" data-via="hail2u_">Tweet</a></div>
      <div class="htn-bookmark"><a href="http://b.hatena.ne.jp/entry/http://hail2u.github.com/css21-advent-calendar-2011.html" class="hatena-bookmark-button" data-hatena-bookmark-title="CSS 2.1 Advent Calendar '11" data-hatena-bookmark-layout="standard">はてなブックマーク</a></div>
    </aside>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
<script type="text/javascript" src="//b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
  </body>
</html>
